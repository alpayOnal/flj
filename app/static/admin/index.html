<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <title>Jobs Management for Bosses</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet"
          href="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/css/bootstrap.css">
    <link rel="stylesheet" href="css/main.css">

</head>

<body>
<nav class="navbar">
    <a class="navbar-brand" href="#">FLJ</a>
    <ul class="nav nav-pills">
        <li class="nav-item">
            <a class="nav-link active" href="#jobs" role="tab"
               data-toggle="tab">Jobs</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#accounts" role="tab"
               data-toggle="tab">Accounts</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#crawlers" role="tab"
               data-toggle="tab">Crawlers</a>
        </li>
    </ul>

</nav>

<div class="container tab-content">
    <div role="tabpanel" class="tab-pane active" id="jobs">

        <div id="newJobsTimeseries"></div>

        <div class="listToolbar">
            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-primary btn-sm active jobDateFilter"
                       data-range="today">
                    <input type="radio" name="options" autocomplete="off"
                           checked> Today
                </label>
                <label class="btn btn-primary btn-sm jobDateFilter"
                       data-range="yesterday">
                    <input type="radio" name="options" autocomplete="off">
                    Yesterday
                </label>
                <label class="btn btn-primary btn-sm jobDateFilter"
                       data-range="week">
                    <input type="radio" name="options" autocomplete="off"> This
                    week
                </label>
            </div>
            <div class="btn-group actions" data-toggle="buttons">
                <button class="btn btn-sm btn-danger delete">Delete selected
                    jobs
                </button>
            </div>
            <i id="jobCount" class="pull-right"></i>
        </div>

        <table id="jobs" class="table table-hover">
            <thead></thead>
            <script id="template_job_entry" type="x-tmpl-mustache">
            <tr>
                <td class="selection">
                    <input type="checkbox" name="job[]" value="{{_id}}" /></td>
                <td class="title">{{title}}</td>
                <td class="date">{{date}}</td>
                <td class="source">{{source}}</td>
                <td class="actions">
                    <button class="toggleDetail">...</button>
                </td>
            </tr>
            <tr class="detail">
                <td colspan="5">
                    <div class="location">
                        <b>Location: </b>
                        <span>{{locationStr}}</span></div>
                    <div class="company">
                        <b>Company: </b>
                        <span>{{company}}</span></div>
                    <div class="jobType">
                        <b>Job type: </b>
                        <span>{{jobType}} </span>
                        <b>Salary: </b>
                        <span>{{salary}}</span>
                        <b>URL: </b>
                        <span>{{{sourceUrl}}}</span>
                        </div>
                    <div class="description">
                        <b>Description: </b>
                        <span>{{description}}</span></div>
                </td>
            </tr>


            </script>
            <tbody>
            </tbody>
        </table>
    </div> <!-- END OF TAB "JOBS" -->


    <div role="tabpanel" class="tab-pane" id="accounts">accounts
    </div> <!-- END OF TAB "ACCOUNTS" -->


    <div role="tabpanel" class="tab-pane" id="crawlers">
        <h3>Crawlers</h3>
        <script id="template_crawlerlog_entry" type="x-tmpl-mustache">
            <tr>
                <td class="date">{{{date}}}</td>
                <td class="name">{{name}}</td>
                <td class="newJobs">{{newJobs}}</td>
                <td class="jobsFound">{{jobsFound}}</td>
                <td class="url">{{{url}}}</td>
            </tr>
        </script>
        <table id="crawlerLogs" class="table table-hover">
            <thead></thead>
            <tbody></tbody>
        </table>
    </div> <!-- END OF TAB "CRAWLERS" -->


</div>
<!-- /.container -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/js/bootstrap.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.2.0/mustache.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="js/jobs.js"></script>
<script type="text/javascript">
        $(".jobDateFilter").click(function(e){
            loadJobEntries($("#jobs tbody"), $(this).attr("data-range"))
        });
        loadJobEntries($("#jobs tbody"), "today")
        plotTimeseriesForNewJobs($("#newJobsTimeseries"))
        bindListToolbar()

        $('.navbar a').click(function (e) {
          e.preventDefault()
          $(this).tab('show')
        })
        loadCrawlerLogs($("#crawlerLogs"))

</script>
</body>
</html>
